<div class="container">
  <div class="my-5">
      <h1>Dashboard</h1>
  </div>

  <% if current_user.active_course %>

    <div class="mb-4"><h2>Hi <%= current_user.first_name %>, you're on a <%= current_user.streak %>-day streak!👍</h2></div>
      <h3>Pick up where you left off</h3>
        <div class="row">
          <div class="col-md-6 mb-4">
            <div class="card-course h-100 d-flex flex-column align-items-center justify-content-center text-center">
              <%= link_to course_path(current_user.active_course.title), class: "d-flex flex-column align-items-center text-decoration-none text-dark" do %>
                <div class="mb-4">
                  <%= image_tag current_user.active_course.image_name, alt: '', class: "custom-image" %>
                </div>
                <div>
                  <h3><%= current_user.active_course.title %></h3>
                  <p><%= current_user.active_course.description %></p>
                </div>
              <% end %>
            </div>
          </div>

          <div class="col-md-6 mb-4">
            <div class="card-course h-100 d-flex flex-column align-items-center justify-content-center text-center">
              <div>
                <h3>Leaderboard</h3>
                <% @top_five.each_with_index do |user, index| %>
                  <%# below class_names is for conditional styling of the current user (if user is in top 5) %>
                  <%# Can add multiple classes e.g. class_names("bg-dark", {"text-warning": user == current_user })  %>
                  <p class="<%= class_names({"text-warning": user == current_user}) %>" > <%= index + 1 %>. <%= user.first_name %> <%= user.coins %> coins 🪙</p>
                <% end %>
                <% if !@current_user_in_top_five %>
                  <p>...</p>
                  <%# for demo purposes, if want to have ~6000 users for rank, make conditional e.g.  %>
                  <%# if current_user.first_name == "Ryan" && current_user.last_name == "Ryan's last name" ie. the demo user  %>
                  <%# display e.g. 6003 for rank! So Ryan can be super competitive  %>
                  <p> <%= current_user.current_rank %>. <%= current_user.first_name %> <%= current_user.coins %> coins 🪙</p>
                <% end %>
              </div>
            </div>
          </div>
        </div>

  <% else %>
    <h3>You're not yet enrolled in any courses! Get started now!</h3>
  <% end %>


  <div class="mt-8">
    <h3>Recommended for you:</h3>
  </div>
  <% @recommended_courses = Course.user_not_enrolled(current_user).take(3) %>
  <% @recommended_courses.each do |course| %>
    <div class="col-md-4 mb-4">
        <div class="card-course  h-100">
            <%= link_to course_path(course.title), class: "d-flex flex-column text-decoration-none text-dark" do %>
            <div style="margin-bottom: 2rem;">
              <%= image_tag course.image_name, alt: '', class: "custom-image" %>
            </div>
            <div>
              <h3><%= course.title %></h3>
              <p><%= course.description %></p>
            </div>
          <% end %>
        </div>
      </div>
  <% end %>
</div>
